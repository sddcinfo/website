name = "sddc-info-website"
main = "dist/_worker.js/index.js"
compatibility_date = "2024-11-14"
compatibility_flags = ["nodejs_compat"]

# Custom domain routing
routes = [
  { pattern = "sddc.info/*", zone_name = "sddc.info" },
  { pattern = "www.sddc.info/*", zone_name = "sddc.info" }
]

[build]
command = "npm run build"

# Static assets configuration for pure Workers
# Assets directory is dist so paths are preserved (_astro/*)
[assets]
directory = "dist"
binding = "ASSETS"

# Environment variables
# Note: CONTACT_EMAIL and RESEND_API_KEY are set via secrets
# Use: npx wrangler secret put CONTACT_EMAIL
#      npx wrangler secret put RESEND_API_KEY